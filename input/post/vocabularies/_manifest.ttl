@prefix mf: <http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#> .
@prefix kgi: <http://ns.inria.fr/kg/index#> .

<> a mf:Manifest ;
    kgi:requiredAssets (
        <../redundancy/manifest.ttl>
    ) ;
    mf:include (
        <classes/_manifest.ttl>
        <properties/_manifest.ttl>
        # <resources/_manifest.ttl>
    ) ;
    mf:entries (
        <loadVocabularies.ttl>
    ) .

<loadVocabularies.ttl> a md:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
            PREFIX void: <http://rdfs.org/ns/void#>
            INSERT {
                GRAPH ?g { 
                    ?s ?p ?o .
                }
            }
            WHERE {
                GRAPH ?kgGraph {
                    ?kg void:vocabulary ?vocab .
                }
                bind (xt:load(?vocab) as ?g)
                GRAPH ?g { 
                    ?s ?p ?o .
                }
            }
            """
        ]
    ) .


    # Add number of triples with the resource among KGs
    # Count number of Kgs with the resource
    # Link the resource with some "usedIn"  property
    # ?elem voaf:inDataset ?elemDatasetOccurence
    #     a voaf:DatasetOccurences ;
    #     voaf:inDataset ?kg ;
    #     voaf:occurrences 20 ;
    #     ]
    # ] ;
    # voaf:reusedByDatasets 10 ;
    # voaf:occurrencesInDatasets 200 .
    # BIND( Iri( CONCAT( str(kgi:), MD5( CONCAT(STR(?elem) , STR(?kg) ) ) ) ) as ?elemDatasetOccurence )